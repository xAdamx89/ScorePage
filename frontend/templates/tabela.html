<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Tabela wyników</title>
    <style>
        table { border-collapse: collapse; width: 80%; margin: 20px auto; }
        th, td { border: 1px solid #333; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h2 style="text-align:center;">Wyniki punktów</h2>
    <table id="tabela">
        <thead>
            <tr id="naglowki"></tr>
        </thead>
        <tbody id="wiersze"></tbody>
    </table>

    <script>
        async function loadData() {
            const response = await fetch("http://localhost:5432/all");
            const data = await response.json();

            if (!data.result || data.result.length === 0) return;

            const columns = Object.keys(data.result[0]);
            const naglowki = document.getElementById("naglowki");
            columns.forEach(col => {
                const th = document.createElement("th");
                th.textContent = col;
                naglowki.appendChild(th);
            });

            const tbody = document.getElementById("wiersze");
            data.result.forEach(row => {
                const tr = document.createElement("tr");
                columns.forEach(col => {
                    const td = document.createElement("td");
                    td.textContent = row[col];
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });
        }

        loadData();
    </script>
</body>
</html>
